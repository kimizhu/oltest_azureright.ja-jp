---
description: na
keywords: na
pagetitle: Operations for Your Azure Rights Management Tenant Key
search: na
ms.date: na
ms.service: rights-management
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 1284d0ee-0a72-45ba-a64c-3dcb25846c3d
---
# Azure Rights Management テナント キーに対する操作
組織のテナント キー トポロジ (Microsoft が管理またはお客様が管理) に応じて、実装後の Microsoft Azure Rights Management (Azure RMS) テナント キーに対する制御および責任のレベルは異なります。

独自のテナント キーを自分で管理する場合、これは一般に BYOK (Bring Your Own Key) と呼ばれます。 このシナリオの詳細、および 2 つのテナント キー トポロジから選択する方法については、「[Azure Rights Management テナント キーを計画して実装する](../Topic/Planning_and_Implementing_Your_Azure_Rights_Management_Tenant_Key.md)」を参照してください。

次の表に、Azure RMS テナント キーの選択したトポロジに応じて実行できる操作を示します。

|ライフサイクル操作|Microsoft が管理 (既定)|お客様が管理 (BYOK)|
|-------------|----------------------|-----------------|
|テナント キーを取り消します|いいえ (自動)|いいえ (自動)|
|テナント キーを再入力します|はい|はい|
|テナント キーをバックアップ/復旧します|いいえ|はい|
|テナント キーをエクスポートします|はい|いいえ|
|侵害に反応します|はい|はい|
実装したトポロジを識別したら、次のいずれかのセクションを使用して Azure RMS テナント キーに対するこれらの操作の詳細をご覧ください。

## <a name="BKMK_MSManagedOperations"></a>Microsoft が管理:テナント キーのライフサイクル操作
Microsoft が Azure Rights Management のテナント キーを管理する場合 (既定)、次のセクションを使用してこのトポロジに関連するライフサイクル操作に関する詳細を参照してください。

-   [テナント キーを取り消します](../Topic/Operations_for_Your_Azure_Rights_Management_Tenant_Key.md#BKMK_MSRevoke)

-   [テナント キーを再入力します](../Topic/Operations_for_Your_Azure_Rights_Management_Tenant_Key.md#BKMK_MSRekey)

-   [テナント キーをバックアップ/復旧します](../Topic/Operations_for_Your_Azure_Rights_Management_Tenant_Key.md#BKMK_MSBackup)

-   [テナント キーをエクスポートします](../Topic/Operations_for_Your_Azure_Rights_Management_Tenant_Key.md#BKMK_MSExport)

-   [侵害に反応します](../Topic/Operations_for_Your_Azure_Rights_Management_Tenant_Key.md#BKMK_MSBreach)

### <a name="BKMK_MSRevoke"></a>テナント キーを取り消します
Azure RMS のサブスクリプションを解除すると、Azure RMS はテナント キーの使用を停止します。ユーザー側の操作は必要ありません。

### <a name="BKMK_MSRekey"></a>テナント キーを再入力します
再入力は「キーをロールする」とも呼ばれます。 本当に必要でない限り、テナント キーは再入力しないでください。 Office 2010 など、以前のクライアントはキー変更を滑らかに処理するようには設計されていません。 このシナリオでは、グループ ポリシーまたは同等のメカニズムを利用し、コンピューターの RMS 状態を消去する必要があります。 ただし、場合によってはテナント キーの再入力を強制する正規のイベントがいくつかあります。 例:

-   あなたの会社が 2 つ以上の会社に分かれました。 テナント キーを再入力すると、新しい会社はあなたの社員が公開する新しいコンテンツにアクセスできません。 以前のテナント キーのコピーがあれば、以前のコンテンツにアクセスできます。

-   テナント キーのマスター コピー (あなたが所有するコピー) の盗難が疑われています。

テナント キーを再入力するには、Microsoft カスタマー サポート サービス (CSS) に連絡して、自分がテナント管理者であることを証明する必要があります。

テナント キーを再入力すると、新しいコンテンツは新しいテナント キーの利用により保護されます。 これは段階的に行われます。そのため、一定期間、一部の新しいコンテンツは引き続き以前のテナント キーで保護されます。 以前に保護されたコンテンツは以前のテナント キーで引き続き保護されます。 このシナリオをサポートするために、Azure RMS は以前のテナント キーを保有します。そのため、古いコンテンツのライセンスを発行できます。

### <a name="BKMK_MSBackup"></a>テナント キーをバックアップ/復旧します
テナント キーのバックアップは Microsoft が行うため、ユーザーの操作は必要ありません。

### <a name="BKMK_MSExport"></a>テナント キーをエクスポートします
Azure RMS の構成およびテナント キーをエクスポートするには、次の 3 つの手順に従います。

##### 手順 1:エクスポートを開始する

-   この手順を行うには、Microsoft カスタマー サービス サポート (CSS) に連絡してください。 自分が Azure RMS テナントの管理者であることを証明する必要があります。

##### 手順 2:検証が完了するまで待機する

-   Microsoft は RMS テナント キーのリリース要求が正当であることを確認します。 このプロセスには、最大 3 週間を要することがあります。

##### 手順 3:CSS からキーの手順を受領する

-   Microsoft カスタマー サポート サービス (CSS) は、Azure RMS の構成およびテナント キーを、パスワードで保護されたファイル (拡張子 .tpd) として暗号化して送付します。 これにあたって、CSS はまずエクスポートを開始したユーザーにツールを電子メールで送信します。 このツールをコマンド プロンプトから次のように実行します。

    ```
    AadrmTpd.exe -createkey
    ```
    この結果、RSA キー ペアが生成され、公開キーおよび秘密キーが現在のフォルダーにファイルとして保存されます。 たとえば、**PublicKey-FA29D0FE-5049-4C8E-931B-96C6152B0441.txt** と **PrivateKey-FA29D0FE-5049-4C8E-931B-96C6152B0441.txt** のようになります。

    CSS からの電子メールに返信します。返信には名前が **PublicKey** で始まるファイルを添付します。 次に CSS は、TPD ファイルを、RSA キーで暗号化された .xml ファイルとして送信します。 AadrmTpd ツールを最初に実行したフォルダーに、このファイルをコピーし、名前が **PrivateKey** で始まるファイルと CSS から受け取ったこのファイルを使用して AadrmTpd ツールをもう一度実行します。 例:

    ```
    AadrmTpd.exe -key PrivateKey-FA29D0FE-5049-4C8E-931B-96C6152B0441.txt -target TPD-77172C7B-8E21-48B7-9854-7A4CEAC474D0.xml
    ```
    このコマンドの出力は 2 つのファイルです。一方のファイルにはパスワードで保護された TPD のプレーンテキスト パスワードが含まれ、他方のファイルにはパスワードで保護された TPD 自体が含まれています。 AadrmTpd.exe -createkey コマンドを実行した場合、相互参照のため、どちらのファイルの GUID も公開キーおよび秘密キー ファイルと同じになります。

    -   Password-FA29D0FE-5049-4C8E-931B-96C6152B0441.txt

    -   ExportedTPD-FA29D0FE-5049-4C8E-931B-96C6152B0441.xml

    これらのファイルをバックアップし、安全な場所に保存します。これにより、このテナント キーで保護されたコンテンツを継続して暗号化解除できるようになります。 また、AD RMS に移行する場合は、この TPD ファイル (名前が **ExportedTDP** で始まるファイル) を AD RMS サーバーにインポートできます。

##### 手順 4:継続:テナント キーを保護する

-   テナント キーを受領したら、厳重に保護してください。だれかがそれにアクセスできる場合、そのキーを使用して保護されているすべてのドキュメントを暗号化解除できるからです。

    テナント キーをエクスポートする理由が、Azure RMS を使用しなくなったためである場合、ベスト プラクティスとして、直ちに RMS テナントを非アクティブ化してください。 これは、テナント キーの受領後すぐに実行してください。この予防策によって、アクセスすべきでないだれかがテナント キーにアクセスした場合の影響を最小限にできます。 手順については、「[Azure Rights Management の使用停止と非アクティブ化](../Topic/Decommissioning_and_Deactivating_Azure_Rights_Management.md)」を参照してください。

### <a name="BKMK_MSBreach"></a>侵害に反応します
違反対応プロセスがなければ、どれほど強固でも、セキュリティ システムは完全になりません。 あなたのテナント キーが盗まれた可能性があります。 たとえ十分に保護されていても、現在の HSM 技術、現在のキー長、アルゴリズムに脆弱性が見つかる可能性があります。

製品とサービスのセキュリティ インシデントに対応するためにマイクロソフトは専用のチームを置いています。 インシデントが認められる報告があった場合、至急、このチームは範囲、根本原因、軽減の調査にあたります。 このインシデントがあなたの資産に影響を与える場合、マイクロソフトは Azure RMS テナント管理者に電子メールで通知します。その際、サブスクリプションで指定されたアドレスが使われます。

侵害がある場合、あなたまたはマイクロソフトがとれる最善策は侵害の範囲によって異なります。マイクロソフトはあなたと連携し、このプロセスを進めます。 次の表は一般的な状況と考えられる対応をいくつかまとめたものです。ただし、厳密な対応は調査中に明らかになった情報によって変わります。

|インシデントの説明|考えられる対応|
|-------------|-----------|
|テナント キーが漏れています。|テナント キーを再入力します。 このトピックの「[テナント キーを再入力します](../Topic/Operations_for_Your_Azure_Rights_Management_Tenant_Key.md#BKMK_MSRekey)」を参照してください。|
|無許可の個人またはマルウェアがテナント キーを使用する権利を手に入れましたが、キー自体は漏えいしていません。|テナント キーを再入力してもここでは役に立ちません。根本原因の分析が必要です。 無許可の個人がアクセスを得た原因がプロセスまたはソフトウェアのバグにある場合、その状況は解決する必要があります。|
|RSA アルゴリズム、キーの長さ、ブルート フォース攻撃に見られる脆弱性がコンピューターで実現可能になります。|マイクロソフトは回復力のある新しいアルゴリズムまたは長いキーをサポートするように Azure RMS を更新し、すべてのお客様にテナント キーの更新を指示する必要があります。|

## <a name="BKMK_BYOKManagedOperations"></a>お客様が管理:テナント キーのライフサイクル操作
Azure Rights Management のテナント キーを自分で管理する場合 (Bring Your Own Key または BYOK シナリオ) は、次のセクションでこのトポロジに関連するライフサイクル操作に関する詳細を参照してください。

-   [テナント キーを取り消します](../Topic/Operations_for_Your_Azure_Rights_Management_Tenant_Key.md#BKMK_BYOKRevoke)

-   [テナント キーを再入力します](../Topic/Operations_for_Your_Azure_Rights_Management_Tenant_Key.md#BKMK_BYOKRekey)

-   [テナント キーをバックアップ/復旧します](../Topic/Operations_for_Your_Azure_Rights_Management_Tenant_Key.md#BKMK_BYOKBackup)

-   [テナント キーをエクスポートします](../Topic/Operations_for_Your_Azure_Rights_Management_Tenant_Key.md#BKMK_BYOKExport)

-   [侵害に反応します](../Topic/Operations_for_Your_Azure_Rights_Management_Tenant_Key.md#BKMK_BYOKBreach)

### <a name="BKMK_BYOKRevoke"></a>テナント キーを取り消します
Azure RMS のサブスクリプションを解除すると、Azure RMS はテナント キーの使用を停止します。ユーザー側の操作は必要ありません。

### <a name="BKMK_BYOKRekey"></a>テナント キーを再入力します
再入力は「キーをロールする」とも呼ばれます。 本当に必要でない限り、テナント キーは再入力しないでください。 Office 2010 など、以前のクライアントはキー変更を滑らかに処理するようには設計されていません。 このシナリオでは、グループ ポリシーまたは同等のメカニズムを利用し、コンピューターの RMS 状態を消去する必要があります。 ただし、場合によってはテナント キーの再入力を強制する正規のイベントがいくつかあります。 例:

-   あなたの会社が 2 つ以上の会社に分かれました。 テナント キーを再入力すると、新しい会社はあなたの社員が公開する新しいコンテンツにアクセスできません。 以前のテナント キーのコピーがあれば、以前のコンテンツにアクセスできます。

-   テナント キーのマスター コピー (あなたが所有するコピー) の盗難が疑われています。

テナント キーを再入力すると、新しいコンテンツは新しいテナント キーの利用により保護されます。 これは段階的に行われます。そのため、一定期間、一部の新しいコンテンツは引き続き以前のテナント キーで保護されます。 以前に保護されたコンテンツは以前のテナント キーで引き続き保護されます。 このシナリオをサポートするために、Azure RMS は以前のテナント キーを保有します。そのため、古いコンテンツのライセンスを発行できます。

テナント キーを再入力するには、「[BYOK (Bring Your Own Key) の実装](../Topic/Planning_and_Implementing_Your_Azure_Rights_Management_Tenant_Key.md#BKMK_ImplementBYOK)」の「[Azure Rights Management テナント キーを計画して実装する](../Topic/Planning_and_Implementing_Your_Azure_Rights_Management_Tenant_Key.md)」の手順に従って、インターネットで、または本人が直接新しいキーを作成してください。

### <a name="BKMK_BYOKBackup"></a>テナント キーをバックアップ/復旧します
テナント キーのバックアップは自分で行う必要があります。 Thales HSM でテナント キーを生成した場合、キーをバックアップするにはトークン化されたキー ファイル、World ファイル、および管理者カードをバックアップするだけです。

「[BYOK (Bring Your Own Key) の実装](../Topic/Planning_and_Implementing_Your_Azure_Rights_Management_Tenant_Key.md#BKMK_ImplementBYOK)」の「[Azure Rights Management テナント キーを計画して実装する](../Topic/Planning_and_Implementing_Your_Azure_Rights_Management_Tenant_Key.md)」セクションの手順に従ってキーを転送した場合、Azure RMS はトークン化されたキー ファイルを保持して Azure RMS ノードの障害から保護します。 ただし、これを完全なバックアップとは考えないでください。 これは回復不可能なコピーであるため、たとえば Thales HSM の外部で使用するためにキーのプレーンテキスト コピーが必要になった場合でも、Azure RMS はこれを取得することができません。

### <a name="BKMK_BYOKExport"></a>テナント キーをエクスポートします
BYOK を使用する場合、テナント キーを Azure RMS からエクスポートできません。 Azure RMS 内のコピーは回復不可能です。 このキーを削除し、使用できなくする場合は、Microsoft カスタマー サービス サポート (CSS) にお問い合わせください。

### <a name="BKMK_BYOKBreach"></a>侵害に反応します
違反対応プロセスがなければ、どれほど強固でも、セキュリティ システムは完全になりません。 あなたのテナント キーが盗まれた可能性があります。 たとえ十分に保護されていても、現在の HSM 技術、現在のキー長、アルゴリズムに脆弱性が見つかる可能性があります。

製品とサービスのセキュリティ インシデントに対応するためにマイクロソフトは専用のチームを置いています。 インシデントが認められる報告があった場合、至急、このチームは範囲、根本原因、軽減の調査にあたります。 このインシデントがあなたの資産に影響を与える場合、マイクロソフトは Azure RMS テナント管理者に電子メールで通知します。その際、サブスクリプションで指定されたアドレスが使われます。

侵害がある場合、あなたまたはマイクロソフトがとれる最善策は侵害の範囲によって異なります。マイクロソフトはあなたと連携し、このプロセスを進めます。 次の表は一般的な状況と考えられる対応をいくつかまとめたものです。ただし、厳密な対応は調査中に明らかになった情報によって変わります。

|インシデントの説明|考えられる対応|
|-------------|-----------|
|テナント キーが漏れています。|テナント キーを再入力します。 このトピックの「[テナント キーを再入力します](../Topic/Operations_for_Your_Azure_Rights_Management_Tenant_Key.md#BKMK_BYOKRekey)」を参照してください。|
|無許可の個人またはマルウェアがテナント キーを使用する権利を手に入れましたが、キー自体は漏えいしていません。|テナント キーを再入力してもここでは役に立ちません。根本原因の分析が必要です。 無許可の個人がアクセスを得た原因がプロセスまたはソフトウェアのバグにある場合、その状況は解決する必要があります。|
|現行世代の HSM テクノロジに脆弱性が発見された|Microsoft は HSM を更新する必要があります。 脆弱性によってキーが公開されたと信じるに足る理由が存在する場合、Microsoft はすべてのユーザーにテナント キーを更新するように指示します。|
|RSA アルゴリズム、キーの長さ、ブルート フォース攻撃に見られる脆弱性がコンピューターで実現可能になります。|マイクロソフトは回復力のある新しいアルゴリズムまたは長いキーをサポートするように Azure RMS を更新し、すべてのお客様にテナント キーの更新を指示する必要があります。|

## 参照
[Azure Rights Management を使用する](../Topic/Using_Azure_Rights_Management.md)

